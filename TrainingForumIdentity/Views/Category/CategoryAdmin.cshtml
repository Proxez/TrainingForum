@using Entities
@model IEnumerable<Category>

@{
    ViewData["Title"] = "Kategorier";
}

<h2>Kategorier</h2>

@if (TempData["Success"] is string msg)
{
    <div class="alert alert-success">@msg</div>
}

@if (Model != null && Model.Any())
{
    <div class="d-flex flex-column gap-2">
        @foreach (var category in Model)
        {
            <div class="border rounded p-3 d-flex align-items-center justify-content-between">
                <div class="d-flex flex-column">
                    <h4 class="m-0">@category.Title</h4>
                    @if (!string.IsNullOrWhiteSpace(category.Description))
                    {
                        <small class="text-muted">@category.Description</small>
                    }
                </div>

                <div class="d-flex gap-2">
                    <a class="btn btn-primary"
                       asp-controller="SubCategory"
                       asp-action="CreateSubCategory"
                       asp-route-id="@category.Id">
                        Lägg till underkategori
                    </a>                                       
                    <a class="btn btn-secondary"
                       asp-controller="Category"
                       asp-action="UpdateCategory"
                       asp-route-id="@category.Id">
                        Uppdatera
                    </a>
                    <form asp-controller="Category"
                          asp-action="DeleteCategory" 
                          asp-route-id="@category.Id" 
                          method="post">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="id" value="@category.Id" />
                        <button type="submit" class="btn btn-danger">Ta bort</button>
                    </form>
                </div>
            </div>
        }
    </div>
}
else
{
    <p>Inga kategorier ännu.</p>
}
<hr />
<a class="btn btn-primary"
   asp-controller="Category"
   asp-action="CreateCategory">
    Skapa ny kategori
</a>
@* <a class="nav-link text-dark" asp-area="" asp-controller="Category" asp-action="CreateCategory">Create Category</a>
<a class="nav-link text-dark" asp-area="" asp-controller="SubCategory" asp-action="CreateSubCategory">Create SubCategory</a> *@